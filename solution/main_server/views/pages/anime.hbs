<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/javascripts/anime.js"></script>

<main class="container my-4">

    <!-- Page header -->
    <div class="d-flex flex-column flex-md-row align-items-md-end justify-content-between gap-3 mb-3">
        <div>
            <h3>Anime search</h3>
            <p class="text-muted mb-0">
                Results for:
                {{#if query}}
                    <span class="fw-semibold">"{{query}}"</span>
                {{else}}
                    <span class="fw-semibold">""</span>
                {{/if}}
            </p>
        </div>

        <!-- Search bar (repeat on results page) -->
        <form id="searchForm" class="w-100 w-md-auto" role="search">
            <div class="input-group">
                <!-- Input testo -->
                <input id="searchInput" name="query" type="text"
                       class="form-control w-50" placeholder="Type a name..." aria-label="Search term">
                <!-- Select tipo di ricerca -->
                <select id="searchType" class="form-select w-25" aria-label="Select type">
                    <option value="anime" selected>Anime</option>
                    <option value="character">Character</option>
                    <option value="person">Person</option>
                </select>

                <button class="btn btn-dark" type="submit">Search</button>
            </div>
        </form>
    </div>

    <!-- Status / errors -->
    <div id="statusMessage" class="alert alert-info d-none" role="status">Searchingâ€¦</div>

    <div id="errorMessage" class="alert alert-danger d-none" role="alert">
        Something went wrong while contacting the SQL satellite.
    </div>

    <!-- Results summary -->
    <div id="resultsSummary" class="text-muted small mb-3 d-none"></div>

    <!-- Results grid -->
    <div id="resultsGrid" class="row g-3"></div>

    <!-- Template card -->
    <template id="animeCardTemplate">
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100">
                <img class="card-img-top anime-img" src="" alt="Anime image">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title mb-2"></h5>
                    <div class="card-score text-muted small mb-3"></div>
                    <div class="card-genres mt-auto"></div>
                </div>
            </div>
        </div>
    </template>

    <!-- Empty state -->
    <div id="emptyState" class="border rounded p-4 text-center d-none">
        <div class="mb-2 fw-semibold">No results found</div>
        <div class="text-muted">Try a different title (e.g., Naruto, One Piece, Bleach).</div>
    </div>

</main>